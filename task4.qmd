---
title: "Animation"
subtitle: "Data Visualisation"
author: "R P Wadhwa"
format: html
toc: true
toc-depth: 3
theme: cosmo
---

# Task4 â€“ Animation with gganimate

## Using UK Covid data
```{r}

# Load libraries
library(gapminder)
library(ggplot2)
library(gganimate)
library(dplyr)
library(gifski)

# 1. Preparing Data (UK 2020 Data)
uk_2007 <- gapminder %>% filter(country == "United Kingdom", year == 2007)
uk_2020_covid <- uk_2007 %>% 
  mutate(
    year = 2020, 
    lifeExp = lifeExp - 1.5, 
    gdpPercap = gdpPercap * 0.96 
  )
gap_data_covid <- bind_rows(gapminder, uk_2020_covid) %>%
  mutate(Continent = factor(continent))

# 2. Creating the Base Plot
base_anim_covid <- ggplot(
  gap_data_covid,
  aes(x = gdpPercap, y = lifeExp, size = pop, color = Continent, group = country)
) +
  geom_point(alpha = 0.7) +
  # geom_path(aes(group = country), alpha = 0.3) +
  geom_point(
    data = gap_data_covid %>% filter(country == "United Kingdom"),
    color = "red", size = 4, shape = 1
  ) +
  scale_x_log10(labels = scales::dollar) + 
  scale_size(range = c(2, 18), guide = "none") + 
  coord_cartesian(xlim = c(250, 120000), ylim = c(25, 90)) +

  labs(
    title = 'Year: {frame_along} | Event: COVID-19', 
    subtitle = "Simulated effect of COVID-19 on UK Life Expectancy",
    x = "GDP per Capita",
    y = "Life Expectancy (Years)",
    caption = "Data Source: Gapminder (Extended for 2020)"
  ) +
  theme_minimal()

# 3. Adding Animation Layers 
anim_covid <- base_anim_covid +
  transition_reveal(year) +
  shadow_wake(wake_length = 0.1, alpha = FALSE) 
 
# 4. Save the GIF 
anim_save(
  filename = "videos/gapminder_uk_covid_reflection.gif",
  animation = anim_covid, 
  nframes = 150,
  fps = 10,
  width = 800,
  height = 480,
  renderer = gifski_renderer()
)
```

Below is the animated visualisation of the UK's development trajectory, highlighting the impact of the 2020 COVID-19 pandemic.

{{< video videos/gapminder_uk_covid_reflection.gif >}}

Reflective Commentary

# The Value of Animation in Data Storytelling (Holtz, 2018)

I see that animation brings a whole new time element to the table that something static graphs just can't do. For my data project, using the {gganimate} package allows me to actually watch the journey of global development unfold, rather than just seeing where things ended up. It's like seeing the whole movie instead of a single photo. While a static scatter plot shows a snapshot of where countries stand in a single year, an animation reveals the **velocity and direction** of change, making the data feel like a lived history rather than a set of coordinates (Holtz, 2018).

## Interpretive Value: Highlighting the COVID-19 Event

The "personal twist" in this animation is the inclusion of the 2020 COVID-19 impact on the United Kingdom. By extending the Gapminder dataset, we can see a dramatic departure from the long-term trend.

-   **The Pattern Reversal:** For decades, the UK has exhibited a steady "up and to the right" trend, indicating increasing wealth and health.

-   **The Shock:** In 2020, the bubble suddenly moved "down and to the left." This visual hiccup or reversal is a powerful way to communicate the scale of a global crisis.

-   **Perception of Impact:** Since the audience has just witnessed 70 years of steady progress, the sudden decline in life expectancy and GDP per capita carries more emotional and analytical weight. It transforms a statistic into a visible "shock" to the system.

## Grammar of Graphics Reflection

From a technical standpoint, this animation relies on **Aesthetic Mapping** over time. By mapping year to the transition_reveal() function, we tell the Grammar of Graphics to treat the time variable as the "sequencer" for the visual frames. This reinforces the idea that an animation is not a different type of plot, but simply a plot where one aesthetic (time) is rendered across multiple frames instead of on a single axis.

